import py_keyState;

const mainKeyState = keyState.KeyState('w', 's', 'a', 'd');

function procPlayerKey() {
    // Check if user has selected his/her avoider.
    const unitepd = dwepdread_epd(EPD(0x6284E8));
    const player = dwbreak(dwread_epd(unitepd + (0x4C / 4)))[[2]];
    if(player != getuserplayerid()) return;
    const unitType = dwread_epd(unitepd + (0x64 / 4));
    if(unitType != $U('Avoider')) return;

    const player = dwbreak(dwread_epd(selected_epd + ))

    // Get key
    var dx, dy = 0, 0;
    mainKeyState.update();
    if(mainKeyState.currentlyKeyDown('w')) dy--;
    if(mainKeyState.currentlyKeyDown('s')) dy++;
    if(mainKeyState.currentlyKeyDown('a')) dx--;
    if(mainKeyState.currentlyKeyDown('d')) dx++;
    var dxdyCode = (dx + 1) * 3 + (dy + 1);
}